# Caddyfile for La Gazette de la Vie
# Copy to /etc/caddy/Caddyfile and replace the domain.

gazette.example.com {
  encode zstd gzip

  handle /api/* {
    reverse_proxy 127.0.0.1:3000
  }

  handle /health {
    reverse_proxy 127.0.0.1:3000
  }

  handle {
    root * /opt/gazette/apps/frontend/dist
    try_files {path} /index.html
    file_server
  }
}
